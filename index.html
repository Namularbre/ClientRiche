<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestion exploitant</title>
    <!-- JS -->
    <script src="https://code.jquery.com/jquery-3.6.0.js"
        integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk=" crossorigin="anonymous"></script>
    <script src="./script/connecterUtilisateur.js"></script>
    <!-- CSS -->
    <link href="style/barreDeNavigation.css" rel="stylesheet" type="text/css">
    <link href="style/reset.css"             rel="stylesheet" type="text/css">
    <link href="style/style.css"             rel="stylesheet" type="text/css">
    <link href="style/menu.css"              rel="stylesheet" type="text/css">
    <link href="style/modifierParcelle.css"  rel="stylesheet" type="text/css">
</head>

<body>
    <div id="ConnectionView">
        <h1>Connexion</h1>
        <form id="connectionUtilisateur">
            <label for="nom">Nom</label>
            <input type="text" id="nom" placeholder="Entrez votre nom">
            <label for="code">Mot de passe</label>
            <input type="password" id="code" placeholder="Entrez votre mot de passe">
            <input type="button" id="btnvalider" value="Se connecter">
        </form>
    </div>
    <script>
        let user = null;

        $(document).connecterUtilisateur({
            container: "form",
            success: (data) => {
                user = data
               $("#ConnectionView").remove();
               //On charge la vue du menu si l'utilisateur est reconnu
                allerDansMenu();
            },
            error: () => {
                alert("Votre identifiant ou votre mot de passe est inconnu");
            }
        });

        function allerDansMenu() {
            $.get( "./views/menu.html", function( data ) {
                $( "body" ).html( data );
            });
        }
    </script>
</body>
</html>